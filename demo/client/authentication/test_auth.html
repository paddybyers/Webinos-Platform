<html>
	<head>
		<script src="/client/jquery-1.6.4.min.js"></script>
		<script type="text/javascript" src="/client/webinos.js"></script>
		<link rel="stylesheet" type="text/css" href="/client/style.css" media="screen"/>
		<script>
			$(document).ready(function() {
				var auth = null;
						
				$('#findService').bind('click', function() {
					webinos.ServiceDiscovery.findServices(new ServiceType('http://webinos.org/api/authentication'), {onFound: function (service) {
						auth = service;
                    	document.getElementById("find_message").innerHTML = 'Service found';
                    	document.getElementById("bind_message").innerHTML = 'Click on Bind Service';
						$('#bindService').bind('click', function() {
							service.bindService({
								onBind: function () {
									document.getElementById("bind_message").innerHTML = 'Service bound';
								}
							});
						});
					}});
				});
					
				$('#authenticate').bind('click', function() {
					if (auth == null) {
						alert("Click on Find Service first");
					}
					else {
						auth.authenticate(document.getElementById("username").value, function (result){
							alert(result);
						}, function (error){
							if(typeof(error) == 'object') {
								alert("error code: " + error.code + "\nerror message: " + error.message);
							}
							else {
								alert("Unknown error");
							}
						});
					}
				}); 

				$('#isAuthenticated').bind('click', function() {
					if (auth == null) {
						alert("Click on Find Service first");
					}
					else {
						auth.isAuthenticated(document.getElementById("username").value, function (result){
							alert(result);
						}, function (error){
							if(typeof(error) == 'object') {
								alert("error code: " + error.code + "\nerror message: " + error.message);
							}
							else {
								alert("Unknown error");
							}
						});
					}
				}); 

				$('#getAuthenticationStatus').bind('click', function() {
					if (auth == null) {
						alert("Click on Find Service first");
					}
					else {
						auth.getAuthenticationStatus(document.getElementById("username").value, function (result){
							alert(result);
						}, function (error){
							if(typeof(error) == 'object') {
								alert("error code: " + error.code + "\nerror message: " + error.message);
							}
							else {
								alert("Unknown error");
							}
						});
					}
				}); 
			});
		</script>
	</head>
<body>
<table border="1">
	<tr valign="top" >
		<td>
			<div>
				<p>PZH PZP LIST : <select id="pzh_pzp_list"> <option> </option> </select> </p>
			</div>
		</td>
	</tr>
	<tr valign="top" >
		<td>
			<div >
				<p><button id="findService">Find Service</button> <span id="find_message">Click on Find Service</span></p>
				<p><button id="bindService">Bind Service</button> <span id="bind_message"></span></p>
			</div>
		</td>
	</tr>
	<tr valign="top" >
		<td>
			<div >
				<p><button id="authenticate">authenticate</button>
				<button id="isAuthenticated">isAuthenticated</button>
				<button id="getAuthenticationStatus">getAuthenticationStatus</button></p>
				<p><label for="username">Username</label><input type="text" id="username" /></p>
			</div>
		</td>
	</tr>
</table>
</body>
</html>
